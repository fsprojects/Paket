<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Paket and the .NET SDK / .NET Core CLI tools (dotnet CLI and MSBuild 15)
</title>
    <link rel="icon" type="image/png" href="./img/logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="A dependency manager for .NET with support for NuGet packages and git repositories."/>
    <meta name="author" content="Steffen Forkmann, Alexander Groß"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="./content/style.css" />
    <script type="text/javascript" src="./content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style type="text/css">
      table.pre td.lines {
        vertical-align: top;
      }
      pre.fssnip code[lang=batchfile],
      pre.fssnip code[lang=msh] {
        display: inline-block;
        white-space: pre-wrap;       /* CSS 3 */
        white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
        white-space: -pre-wrap;      /* Opera 4-6 */
        white-space: -o-pre-wrap;    /* Opera 7 */
        word-wrap: break-word;       /* Internet Explorer 5.5+ */
        word-break: keep-all;
        padding-left: 2em;
        text-indent: -2em;
      }
    </style>
    <script type="text/javascript">
      $(function() {
        $("code[lang='batchfile'], code[lang='msh']").each(function() {
          $(this).html($(this).html().replace(/ &lt;/g, "&nbsp;&lt;"))
        })
      })
    </script>
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://github.com/fsprojects/Paket">github page</a></li>
        </ul>
        <h3 class="muted"><a href="./index.html">Paket</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Paket-and-the-NET-SDK-NET-Core-CLI-tools-dotnet-CLI-and-MSBuild-15" class="anchor" href="#Paket-and-the-NET-SDK-NET-Core-CLI-tools-dotnet-CLI-and-MSBuild-15">Paket and the .NET SDK / .NET Core CLI tools (dotnet CLI and MSBuild 15)</a></h1>
<p>Paket provides support for <a href="https://github.com/dotnet/sdk">.NET SDK</a>-based
projects that are used with <a href="https://github.com/dotnet/cli">the <code>dotnet</code> CLI</a>
(running with <a href="https://github.com/dotnet/core">.NET Core</a>) or with MSBuild 15
(Visual Studio 2017 and Mono 5).</p>
<p>The general workflow is not very different from using Paket with traditional
.NET projects which it is described in the
<a href="getting-started.html">"Getting started" tutorial</a>.</p>
<h2><a name="Setup" class="anchor" href="#Setup">Setup</a></h2>
<h3><a name="Downloading-Paket-s-Bootstrapper" class="anchor" href="#Downloading-Paket-s-Bootstrapper">Downloading Paket's Bootstrapper</a></h3>
<p>For <code>dotnet</code> CLI to work properly Paket needs to be used in
<a href="bootstrapper.html#Magic-mode">"magic mode"</a>.</p>
<ol>
<li>Create a <code>.paket</code> directory in the root of your solution.</li>
<li>
Download the latest
<a href="https://github.com/fsprojects/Paket/releases/latest"><code>paket.bootstrapper.exe</code></a>
into that directory.
</li>
<li>
Rename <code>.paket/paket.bootstrapper.exe</code> to <code>.paket/paket.exe</code>.
<a href="bootstrapper.html#Magic-mode">Read more about "magic mode"</a>.
</li>
<li>Commit <code>.paket/paket.exe</code> to your repository.</li>
<li>
After the first <code>.paket/paket.exe</code> invocation Paket will create a couple of
files in <code>.paket</code> — commit those as well.
</li>
</ol>
<p>There are already a couple of <code>dotnet</code> <a href="https://github.com/dotnet/templating/wiki/Available-templates-for-dotnet-new#f-templates">templates available</a> that ship with Paket
support. In that case you don't need to setup the bootstrapper manually.</p>
<h3><a name="Specifying-dependencies" class="anchor" href="#Specifying-dependencies">Specifying dependencies</a></h3>
<p>Create a <a href="dependencies-file.html"><code>paket.dependencies</code> file</a> in your project's
root and specify all your dependencies in it.</p>
<p>To create an empty <code>paket.dependencies</code> file, just run:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="sh">.paket/paket.exe init
</code></pre></td></tr></table>
<p>This step is the same as with traditional .NET projects.</p>
<h3><a name="Specifying-dependencies-for-CLI-tools" class="anchor" href="#Specifying-dependencies-for-CLI-tools">Specifying dependencies for <code>dotnet</code> CLI tools</a></h3>
<p>Paket 5.5 and later supports a new keyword for the
<a href="dependencies-file.html"><code>paket.dependencies</code> file</a>: The
<a href="nuget-dependencies.html#Special-case-CLI-tools"><code>clitool</code> reference</a>
allows you to use specialized NuGet packages that provide <code>dotnet</code> CLI tools.</p>
<p>CLI tools are only available for .NET SDK-based projects.</p>
<blockquote>
<p>Consider setting <code>storage: none</code> in your dependencies file for the relevant groups to mirror NuGet behavior and
not copy all dependencies to the packages folder. This will keep your repository folder small and clean.
Please read the relevant section of the <a href="dependencies-file.html"><code>paket.dependencies</code> file</a> documentation.</p>
</blockquote>
<h3><a name="Installing-dependencies" class="anchor" href="#Installing-dependencies">Installing dependencies</a></h3>
<p>Install all required packages with:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="sh">.paket/paket.exe install
</code></pre></td></tr></table>
<p>This step is the same as with traditional .NET projects.</p>
<h3><a name="Installing-dependencies-into-projects" class="anchor" href="#Installing-dependencies-into-projects">Installing dependencies into projects</a></h3>
<p>Like with traditional .NET projects you also need to put a
<a href="references-files.html"><code>paket.references</code> files</a> alongside your MSBuild project
files.</p>
<p>After <a href="references-files.html"><code>paket.references</code> files</a> files have been created,
run <code>dotnet restore</code> (see
<a href="paket-and-dotnet-cli.html#Restoring-packages">restoring packages</a>) to update
your projects.</p>
<p>In contrast to traditional .NET projects Paket will not add assembly references
to your project files. Instead it will only generate a single line:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="xml"><span class="k">&lt;</span><span class="i">Import</span> <span class="o">Project</span><span class="k">="..\..\.paket\Paket.Restore.targets"</span> <span class="k">/&gt;</span>
</code></pre></td></tr></table>
<p>This hook tells the .NET SDK to restore packages via
<a href="paket-restore.html">Paket's <code>restore</code> mechanism</a>. A nice benefit is that your
project files are now much cleaner and don't contain many assembly references.</p>
<h3><a name="Restoring-packages" class="anchor" href="#Restoring-packages">Restoring packages</a></h3>
<p><strong>Note:</strong> This is changed from the traditional .NET behavior.</p>
<p>In traditional .NET projects you were used to invoke the
<a href="paket-restore.html"><code>restore</code> command</a> from the root of your repository.</p>
<ul>
<li>
<p>With <code>dotnet</code> CLI you can now run:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="sh">dotnet restore
</code></pre></td></tr></table>
</li>
<li>
<p>With MSBuild 15 (Developer Command Prompt for VS2017 or Mono 5) you can now
run:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="sh">msbuild /t:Restore
</code></pre></td></tr></table>
</li>
</ul>
<p>Both commands will call <a href="paket-restore.html"><code>paket restore</code></a> under the hood.</p>
<p>This step integrates well into the new .NET SDK philosophy. It also works
automatically in situations where <a href="paket-auto-restore.html"><code>auto-restore</code></a> is
enabled. For example, if you open a Paket-enabled solution in Visual Studio 2017
then Visual Studio's background build will restore Paket dependencies
automatically.</p>
<h4><a name="Global-restore" class="anchor" href="#Global-restore">Global restore</a></h4>
<p>For performance reasons, Paket by default will call initial restore for all projects (global).
Because global restore doesn't work in context of a single project, it's not possible to distinguish project-specific MSBuild variables, like <a href="https://docs.microsoft.com/pl-pl/visualstudio/msbuild/common-msbuild-project-properties?view=vs-2017">BaseIntermediateOutputPath</a>.
If you want to use such variables, (e.g. specified in <code>Directory.Build.props</code>), you might want consider disabling global restore by adding following to either <code>Directory.Build.props</code>, or project file:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="xml">    <span class="k">&lt;</span><span class="i">PropertyGroup</span><span class="k">&gt;</span>
        <span class="k">&lt;</span><span class="i">PaketDisableGlobalRestore</span><span class="k">&gt;</span>true<span class="k">&lt;/</span><span class="i">PaketDisableGlobalRestore</span><span class="k">&gt;</span>
    <span class="k">&lt;/</span><span class="i">PropertyGroup</span><span class="k">&gt;</span>
</code></pre></td></tr></table>
<p>Be aware though that this might slow Paket restore process for solutions with many projects.
To find out more check out <a href="https://github.com/fsprojects/Paket/pull/3527">this issue</a>.</p>
<h3><a name="Updating-packages" class="anchor" href="#Updating-packages">Updating packages</a></h3>
<p>If you want to update packages you can use the
<a href="paket-update.html"><code>paket update</code> command</a>:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="sh">.paket/paket.exe update
</code></pre></td></tr></table>
<p>This step is the same as with traditional .NET projects.</p>
<h3><a name="Creating-packages" class="anchor" href="#Creating-packages">Creating packages</a></h3>
<p>If you want to create NuGet packages you can continue to use the
<a href="paket-pack.html"><code>pack</code> command</a> and
<a href="template-files.html"><code>paket.template</code> files</a>.</p>
<p>Alternatively, you can use the .NET SDK's
<a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-pack"><code>dotnet pack</code> support</a>
that will use package metadata information from your MSBuild project and
dependency information from the
<a href="references-files.html"><code>paket.references</code> file</a>.</p>
<ul>
<li>
<p>With <code>dotnet</code> CLI you can now run:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="sh">dotnet pack
</code></pre></td></tr></table>
</li>
<li>
<p>With MSBuild 15 (Developer Command Prompt for VS2017 or Mono 5) you can now
run:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="sh">msbuild /t:Pack
</code></pre></td></tr></table>
</li>
</ul>
<p>For .NET SDK-based projects, all usual NuGet metadata (e.g. <code>Author</code>) for
<code>dotnet pack</code> can be customized for automation as follows:</p>
<ul>
<li>
MSBuild property in the project file: <code>&lt;Author&gt;Nigel Sheldon&lt;/Author&gt;</code> or in
imported files,
</li>
<li>property passed as a command line argument: <code>/p:Author="Nigel Sheldon"</code>,</li>
<li>environment variable: <code>Author=Nigel Sheldon</code>.</li>
</ul>
<h3><a name="Converting-from-NuGet" class="anchor" href="#Converting-from-NuGet">Converting from NuGet</a></h3>
<p>The NuGet conversion process is identical to traditional .NET projects. You can
read about it in the
<a href="convert-from-nuget-tutorial.html">"Converting from NuGet" tutorial</a>.</p>


        </div>
        <div class="span3">
          <img src="./img/logo.png" alt="F# Project" style="width:150px;margin:10px" />
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">Paket</li>
            <li><a href="./index.html">Home page</a></li>
            <li><a href="./getting-started.html">Getting started</a></li>
            <li><a href="./convert-from-nuget-tutorial.html">Convert from NuGet</a></li>
            <li><a href="./paket-and-dotnet-cli.html">Paket with .NET SDK</a></li>
            <li><a href="./faq.html">FAQ</a></li>
            <li><a href="./release-notes.html">Release Notes</a></li>
            <li><a href="./contact.html">Contact</a></li>
            <li><a href="./testimonials.html">Testimonials</a></li>
            <li><a href="./license.html">License</a></li>
            <li><a href="./glossary.html">Glossary</a></li>

            <li class="nav-header">Download Paket</li>
            <li><a href="http://nuget.org/packages/Paket" target="_blank">From NuGet</a></li>
            <li><a href="https://github.com/fsprojects/Paket/releases/latest" target="_blank">From GitHub</a></li>

            <li class="nav-header">GitHub</li>
            <li><a href="http://github.com/fsprojects/Paket" target="_blank">Source Code on GitHub</a></li>
            <li><a href="http://github.com/fsprojects/Paket/issues" target="_blank">Report an issue</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="./dependencies-file.html">paket.dependencies</a></li>
            <li><a href="./lock-file.html">paket.lock</a></li>
            <li><a href="./references-files.html">paket.references</a></li>
            <li><a href="./template-files.html">paket.template</a></li>
            <li><a href="./local-file.html">paket.local</a></li>
            <li><a href="./paket-folder.html">.paket folder</a></li>
            <li><a href="./bootstrapper.html">paket.bootstrapper.exe</a></li>
            <li class="divider"></li>
            <li><a href="./resolver.html">Package resolution algorithm</a></li>
            <li><a href="./groups.html">Dependency Groups</a></li>
            <li><a href="./caches.html">Additional Caches</a></li>
            <li><a href="./nuget-dependencies.html">NuGet dependencies</a></li>
            <li><a href="./git-dependencies.html">Git dependencies</a></li>
            <li><a href="./github-dependencies.html">GitHub dependencies</a></li>
            <li><a href="./http-dependencies.html">HTTP dependencies</a></li>
            <li><a href="./analyzers.html">Analyzers</a></li>
            <li class="divider"></li>
            <li><a href="./installation.html">Installation</a></li>
            <li><a href="./reference-from-repl.html">Using Paket from F# Interactive</a></li>
            <li><a href="./editor-support.html">Editor support</a></li>
            <li><a href="./shell-completion.html">Shell completion</a></li>
            <li><a href="./credential-providers.html">Credential Providers</a></li>
            <li class="divider"></li>
            <li><a href="./reference/index.html">API Reference</a></li>

            <li class="nav-header">Paket commands</li>
            <li><a href="./paket-add.html">paket add</a></li>
            <li><a href="./paket-auto-restore.html">paket auto-restore</a></li>
            <li><a href="./paket-clear-cache.html">paket clear-cache</a></li>
            <li><a href="./paket-config.html">paket config</a></li>
            <li><a href="./paket-convert-from-nuget.html">paket convert-from-nuget</a></li>
            <li><a href="./paket-find-refs.html">paket find-refs</a></li>
            <li><a href="./paket-find-packages.html">paket find-packages</a></li>
            <li><a href="./paket-find-package-versions.html">paket find-package-versions</a></li>
            <li><a href="./paket-generate-load-scripts.html">paket generate-load-scripts</a></li>
            <li><a href="./paket-info.html">paket info</a></li>
            <li><a href="./paket-init.html">paket init</a></li>
            <li><a href="./paket-install.html">paket install</a></li>
            <li><a href="./paket-outdated.html">paket outdated</a></li>
            <li><a href="./paket-pack.html">paket pack</a></li>
            <li><a href="./paket-push.html">paket push</a></li>
            <li><a href="./paket-remove.html">paket remove</a></li>
            <li><a href="./paket-restore.html">paket restore</a></li>
            <li><a href="./paket-simplify.html">paket simplify</a></li>
            <li><a href="./paket-show-groups.html">paket show-groups</a></li>
            <li><a href="./paket-show-installed-packages.html">paket show-installed-packages</a></li>
            <li><a href="./paket-update.html">paket update</a></li>
            <li><a href="./paket-why.html">paket why</a></li>
            <li><a href="./paket-restriction.html">paket restriction</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/fsprojects/Paket"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
</html>
